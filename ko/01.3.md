#1.3 Go 명령어

## Go 명령어

Go 언어에는 완전한 명령어 도구가 함께 제공됩니다. 명령어들을 보기 위해 터미널에서 `go`를 실행해보세요:

![](images/1.3.go.png?raw=true)

Figure 1.3 Go 명령어 상세 정보

이 명령어들은 모두 유용합니다. 이제 이 중 일부를 사용하는 방법을 살펴봅시다.

## go build

이 명령어는 컴파일을 하는데에 사용됩니다. 이는 패키지와 필요할 경우 의존 패키지까지 컴파일합니다. 

- 패키지가 1.2장에서의 `mymath`와 같이 `main` 패키지가 아닐 경우, `go build`를 실행해도 아무것도 생성되지 않습니다. `$GOPATH/pkg`에 `.a` 패키지 파일이 필요하다면, `go install`을 대신 사용하세요.
- 패키지가 `main` 패키지면, 동일한 폴더에 실행파일을 생성합니다. 파일을 `$GOPATH/bin`에 생성하고 싶다면, `go install` 또는 `go build -o ${PATH_HERE}/a.exe`를 사용하세요.
- 폴더에 있는 많은 파일들 중에 하나만 컴파일 하고 싶다면, `go build` 뒤에 파일명을 붙여야합니다. 예를 들면,  `go build a.go`. `go build`는 폴더 내의 모든 파일을 컴파일합니다.
- 또한 생성되는 파일명 또한 지정할 수 있습니다. 예를 들어, `mathapp` 프로젝트에서 (1.2장에 있는), `go build -o astaxie.exe`를 사용하면 `mathapp.exe` 대신 `astaxie.exe`가 생성됩니다. 기본 파일명은 폴더명 (비 메인 패키지) 또는 첫 소스 파일명 (메인 패키지)입니다.

([The Go Programming Language Specification](https://golang.org/ref/spec)에 따르면, 패키지명은 소스 파일의 첫 줄의 `package` 이후의 이름입니다. 이는 폴더명과 동일할 필요는 없으며, 실행 파일명은 기본값으로 여러분의 폴더명으로 지정됩니다.)

- `go build`는 `_` 또는 `.`으로 시작하는 파일명을 가진 파일들은 무시합니다.

- 모든 운영체제에 대해서 각각 다른 소스 파일을 두고 싶으면, 시스템명을 접미사로 파일을 명명하면됩니다. 배열을 로드하는 소스 파일들이 있다고 가정해봅시다. 이 경우 다음과 같이 명명할 수 있습니다:

  array_linux.go | array_darwin.go | array_windows.go | array_freebsd.go

`go build`는 여러분의 운영체제와 관련된 소스 파일을 선택합니다. 예를 들어, Linux 시스템에선 array_linux.go만 컴파일하며, 나머지는 모두 무시합니다.

## go clean

이 명령어는 컴파일러에 의해 생성된 파일들을 삭제하는데 사용되며, 다음의 파일들을 포함합니다:

	_obj/            // Makefiles에 의해 남겨진 오브젝트의 이전 디렉토리
	_test/           // Makefiles에 의해 남겨진 테스트의 이전 디렉토리
	_testmain.go     // Makefiles에 의해 남겨진 gotest의 이전 디렉토리
	test.out         // Makefiles에 의해 남겨진 테스트의 이전 디렉토리
	build.out        // Makefiles에 의해 남겨진 테스트의 이전 디렉토리
	*.[568ao]        // Makefiles에 의해 남겨진 오브젝트 파일
	
	DIR(.exe)        // go build에 의해 생성됨
	DIR.test(.exe)   // go test -c에 의해 생성됨
	MAINFILE(.exe)   // go build MAINFILE.go에 의해 생성됨

저자는 보통 프로젝트를 Github에 업로드 하기 전에 파일들을 정리하는데 이 명령어를 사용합니다. 이 파일들은 로컬 테스트시에는 유용하지만, 버전 컨트롤에는 쓸모없습니다.

## go fmt와 gofmt

C / C ++로 작업하는 사람들은 사람들이 항상 어떤 코드 스타일이 더 나은지에 대해 논쟁해야 한다는 것을 알아야합니다: K&R 스타일 또는 ANSI 스타일. 그러나 Go에서는, 단 하나의 강제되는 코드 스타일이 있습니다. 예를 들어, 왼쪽 괄호는 항상 한 라인의 끝에 삽입되어야하며, 자체적인 라인을 가질 수 없습니고, 이를 지키지 않을 경우 컴파일 에러가 발생합니다. 다행스럽게도, 여러분 이런 규칙을 외우고 있지 않아도 됩니다. `go fmt`가 대신 해줍니다. 터미널에서 그냥 `go fmt <File name>.go` 명령어를 실행하세요. 저자는 이 명령어를 아주 많이 사용하지는 않는데 보통 IDE가 소스 파일을 저장할때 자동으로 이 명령어를 실행시켜주기 때문입니다. 다음장에서 IDE에 대해 더 얘기해봅시다.

`go fmt`는 그냥 임포트 경로에 의해 명명되는 패키지에서 `gofmt -l -w` 명령어를 실행하는 알리아싱입니다.

우리는 보통 `go fmt` 대신 `gofmt -w`를 사용합니다. 후자는 코드를 포맷팅 한 뒤 이를 소스 파일에 재작성하지 않습니다. `gofmt -w src`는 모든 프로젝트를 포맷팅합니다.

## go get

이 명령어는 원격 패키지를 가져오는데 사용됩니다. 지금까지는 Bitbucket, Github, Google Code 및 Launchpad를 지원합니다. 이 명령어를 실행한 뒤에는 정확히 두 가지의 일이 벌어집니다. 첫번째는 Go가 소스 코드를 다운로드 받고, 그 다음 `go install`을 실행합니다. 이 명령어를 사용하기 전에, 관련 툴들을 모두 설치 했는지를 확인하세요.

	BitBucket (Mercurial Git)
	Github (git)
	Google Code (Git, Mercurial, Subversion)
	Launchpad (Bazaar)

이 명령어를 사용하려면 이 툴들을 제대로 설치해야합니다. `$PATH` 변수를 업데이트 하는걸 잊지마세요. 그런데, 이는 또한 커스터마이징된 도메인명도 지원합니다. 이에 대한 자세한 내용은 `go help importpath` 명령어로 확인하세요.

## go install

이 명령어는 모든 패키지를 컴파일하고 파일을 생성한 뒤, 이를 `$GOPATH/pkg` 또는 `$GOPATH/bin`로 옮깁니다.

## go test

이 명령어는 `*_test.go`를 포함하는 이름을 가진 모든 파일들을 로드하여 테스트 파일을 생성한 뒤, 다음과 같은 정보들을 출력합니다.

	ok   archive/tar   0.011s
	FAIL archive/zip   0.022s
	ok   compress/gzip 0.033s
	...

이는 기본적으로 여러분의 모든 테스트 파일을 테스트합니다. 자세한 내용은 `go help testflag` 명령어로 확인하세요.

## godoc

많은 사람들이 Go로 프로그래밍을 하면 별다른 서드 파티 문서화 도구가 필요없다고 말합니다 (사실 저자는 이미 [CHM](https://github.com/astaxie/godoc)를 만들었습니다). Go는 기본적으로 문서를 관리하는 강력한 툴을 가지고 있습니다.

그럼 문서의 패키지 정보는 어떻게 찾을까요? 예를 들어, 만약 여러분이 `builtin` 패키지의 자세한 정보를 얻고 싶다면, `godoc builtin` 명령어를 사용합니다. 유사하게, `http` 패키지 문서를 찾고자 하면 `godoc net/http` 명령어를 사용하세요. 특정 함수에 대한 정보를 보고 싶을땐 `godoc fmt Printf`를 사용하고 소스코드를 보려면 `godoc -src fmt Printf` 명령어를 사용하세요.

`godoc -http=:8080` 명령어를 실행하고, 브라우저에서 `127.0.0.1:8080`에 접속하세요. 로컬화된 golang.org를 볼 수 있습니다. 이는 표준 패키지 정보뿐만 아니라 여러분의 `$GOPATH/pkg`에 있는 패키지들 또한 보여줍니다. 이는 중국의 강력한 방화벽에 시달리는 사람들에게 아주 좋습니다.

## 기타 명령어

Go는 위에서 얘기했던 것들보다 더 많은 명령어를 제공합니다.

	go fix // go1 이전 버전의 코드를 새로운 go1 이후의 버전으로 업그레이드해줌
	go version // Go 버전 정보를 보여줌
	go env // Go 환경 변수들을 보여줌
	go list // 설치된 모든 패키지들을 리스팅함
	go run // 임시 파일로 컴파일한 뒤 프로그램을 실행함

이제까지 얘기한 명령어들에 대한 더욱 자세한 정보도 있습니다. 이 정보들은 `go help <command>`를 사용해 볼 수 있습니다.

## 링크

- [Directory](preface.md)
- 이전 글: [$GOPATH와 워크스페이스](01.2.md)
- 다음 글: [Go 개발자 도구](01.4.md)
